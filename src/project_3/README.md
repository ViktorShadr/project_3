# Проект 3. Поиск вакансий с подключением БД

## Описание
Проект предназначен для получения и хранения данных о работодателях и их вакансиях с сайта [hh.ru](https://hh.ru).  
Он позволяет собирать данные о компаниях, вакансии, средние зарплаты и выполнять поиск по ключевым словам.  

Проект написан на **Python 3.13** и использует:
- **requests** для работы с API hh.ru  
- **psycopg2** для работы с PostgreSQL  
- **dotenv** для хранения конфиденциальных данных  

## Функционал
- Проверка доступности сервиса hh.ru  
- Получение данных о работодателях по ID  
- Получение списка вакансий работодателя  
- Сохранение работодателей и вакансий в базу PostgreSQL  
- Просмотр информации через консольное меню:
  1. Список компаний и количество вакансий  
  2. Список всех вакансий  
  3. Средняя зарплата по вакансиям  
  4. Вакансии с зарплатой выше средней  
  5. Поиск вакансий по ключевому слову  

## Структура проекта
```
├── src/
│   project_3/
│   ├── api/
│   │   ├── base.py          # Базовый класс API-клиента
│   │   └── client.py        # Клиент для работы с API hh.ru
│   ├── db/
│   │   ├── db_init.py       # Создание базы и таблиц
│   │   └── db_manager.py    # Класс для работы с данными в БД
│   ├── config.py            # Конфигурация проекта
│   ├── main.py              # Точка входа в приложение
│   ├── README.md
├── .env                     # Переменные окружения для БД
├── pyproject.toml           # Список зависимостей

```

## Установка и запуск

1. Клонируйте репозиторий:
```bash
git clone <https://github.com/ViktorShadr/project_3>
cd project_3
```

2. Создайте виртуальное окружение и активируйте его:
```bash
poetry install       # Установить все зависимости
poetry shell         # Активировать виртуальное окружение
```


3. Создайте файл `.env` и добавьте параметры подключения к PostgreSQL:
```
DB_NAME=<название_базы>
DB_USER=<пользователь>
DB_PASSWORD=<пароль>
DB_HOST=<хост>
DB_PORT=<порт>
```

4. Запустите приложение:
```bash
python src/main.py
```

---

## Пример работы консольного меню

После запуска программы появится меню:
```
Выберите действие:
1 - Список всех компаний и количество вакансий
2 - Список всех вакансий
3 - Средняя зарплата по вакансиям
4 - Вакансии с зарплатой выше средней
5 - Поиск вакансий по ключевому слову
0 - Выход
```

### Пример вывода компаний и вакансий
```
Яндекс — 120 вакансий
Сбер — 95 вакансий
Тинькофф — 50 вакансий
```

### Пример вывода вакансий
```
Яндекс | Разработчик Python | 120000 - 180000 | https://hh.ru/vacancy/12345
Сбер | Аналитик данных | 90000 - 130000 | https://hh.ru/vacancy/67890
```

### Пример средней зарплаты
```
Средняя зарплата: 145000.00
```

### Поиск вакансий по ключевому слову
```
Введите ключевое слово: Python
Яндекс | Разработчик Python | 120000 - 180000 | https://hh.ru/vacancy/12345
Тинькофф | Python разработчик | 110000 - 150000 | https://hh.ru/vacancy/54321
```

---

## Технологии
- Python 3.13  
- requests  
- psycopg2  
- PostgreSQL  
- dotenv  

## Автор
Viktor Shadrin

